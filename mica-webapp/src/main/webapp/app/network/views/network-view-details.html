<!--
  ~ Copyright (c) 2018 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="voffset4 row">

  <div class="voffset4 col-xs-12">
    <img class="img-responsive desaturate" ng-show="network.logo" ng-src="{{logoUrl}}">
  </div>

  <div class="col-xs-12">
    <div sf-model="network.model" sf-form="sfForm.definition" sf-schema="sfForm.schema" sf-options="sfOptions"></div>
  </div>

  <div class="col-xs-12">
    <h3 translate>studies</h3>

    <div class="hidden-print">
      <a ng-click="addStudyEvent(network)" class="btn btn-responsive btn-info"
        ng-if="inViewMode() && permissions.canEdit()">
        <i class="fa fa-plus"></i> <span translate>study.add</span>
      </a>

      <a class="btn btn-responsive btn-danger" ng-click="deleteSelectedStudiesEvent()"
        ng-if="inViewMode() && permissions.canEdit() && studySummaries && studySummaries.length">
        <i class="fa fa-trash-o"></i> <span translate>global.delete-selected</span>
      </a>

      <a obiba-file-download url="getStudyReportByNetworkUrl()" href class="btn btn-responsive btn-info"
        ng-if="inViewMode() && permissions.canEdit()">
        <i class="fa fa-download"></i> <span translate>report-group.study.button-name</span>
      </a>
    </div>

    <div class="hidden-print row">
      <dir-pagination-controls class="pull-right " pagination-id="studySummaryPagination"></dir-pagination-controls>

      <p class="help-block col-xs-3" ng-if="!studySummaries || studySummaries.length === 0">
        <span translate>study.none</span>
      </p>
    </div>

    <div class="row-fluid">
      <div class="clearfix table-responsive">
        <table class="table table-bordered table-striped" ng-show="studySummaries.length">
          <thead>
          <tr>
            <th ng-if="inViewMode() && permissions.canEdit()" class="hidden-print"></th>
            <th translate>study.acronym</th>
            <th translate>study.name</th>
            <th translate>type</th>
            <th ng-if="inViewMode() && permissions.canEdit()" class="hidden-print" translate>actions</th>
          </tr>
          </thead>
          <tbody>
          <tr pagination-id="studySummaryPagination" dir-paginate="studySummary in studySummaries | itemsPerPage: 10">
            <td ng-if="inViewMode() && permissions.canEdit()" class="hidden-print">
              <input type="checkbox" ng-model="studySummary.selected">
            </td>
            <td>
              <ul class="list-unstyled">
                <li ng-repeat="text in studySummary.acronym">
                  <span class="badge">{{text.lang}}</span>
                  <a ng-href="#/{{studySummary.studyResourcePath}}/{{studySummary.id}}"
                    ng-if="studySummary.permissions.view">{{text.value}}</a>
                  <span ng-if="!studySummary.permissions.view">{{text.value}}</span>
                </li>
              </ul>
            </td>
            <td>
              <ul class="list-unstyled">
                <li ng-repeat="text in studySummary.name">
                  <span class="badge">{{text.lang}}</span>
                  <span>{{text.value}}</span>
                </li>
              </ul>
            </td>
            <td>{{'global.' + studySummary.studyResourcePath | translate}}</td>
            <td ng-if="inViewMode() && permissions.canEdit()" class="hidden-print">
              <a ng-click="deleteStudyEvent(network, studySummary)" class="hand action"><i
                class="fa fa-trash-o"></i></a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="col-xs-12">
    <h3 translate>networks</h3>

    <div class="hidden-print">
      <a ng-click="addNetwork(network)" class="btn btn-responsive btn-info"
        ng-if="inViewMode() && permissions.canEdit()">
        <i class="fa fa-plus"></i> <span translate>network.add</span>
      </a>

      <a class="btn btn-responsive btn-danger" ng-click="deleteSelectedNetworksEvent()"
        ng-if="inViewMode() && permissions.canEdit() && network.networkSummaries && network.networkSummaries.length">
        <i class="fa fa-trash-o"></i> <span translate>global.delete-selected</span>
      </a>
    </div>

    <div class="row">
      <p class="help-block col-xs-3" ng-if="!network.networkSummaries || network.networkSummaries.length === 0">
        <span translate>network.none</span>
      </p>

      <dir-pagination-controls class="pull-right" pagination-id="networkSummaryPagination"></dir-pagination-controls>
    </div>

    <div class="row-fluid">
      <div class="clearfix table-responsive">
        <table class="table table-bordered table-striped" ng-show="network.networkSummaries.length">
          <thead>
          <tr>
            <th ng-if="inViewMode() && permissions.canEdit()" class="hidden-print"></th>
            <th translate>network.acronym</th>
            <th translate>network.name</th>
            <th ng-if="inViewMode() && permissions.canEdit()" class="hidden-print" translate>actions</th>
          </tr>
          </thead>
          <tbody>
          <tr pagination-id="networkSummaryPagination"
            dir-paginate="networkSummary in network.networkSummaries | itemsPerPage: 10">
            <td ng-if="inViewMode() && permissions.canEdit()" class="hidden-print">
              <input type="checkbox" ng-model="networkSummary.selected">
            </td>
            <td>
              <ul class="list-unstyled">
                <li ng-repeat="text in networkSummary.acronym">
                  <span class="badge">{{text.lang}}</span>
                  <a ng-href="#/network/{{networkSummary.id}}"
                    ng-if="networkSummary.permissions.view">{{text.value}}</a>
                  <span ng-if="!networkSummary.permissions.view">{{text.value}}</span>
                </li>
              </ul>
            </td>
            <td>
              <ul class="list-unstyled">
                <li ng-repeat="text in networkSummary.name">
                  <span class="badge">{{text.lang}}</span>
                  <span>{{text.value}}</span>
                </li>
              </ul>
            </td>
            <td ng-if="inViewMode() && permissions.canEdit()" class="hidden-print">
              <a ng-click="deleteNetwork(network, networkSummary)" class="hand action"><i
                class="fa fa-trash-o"></i></a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="col-xs-6" ng-if="inViewMode()">
    <h3 translate>members</h3>

    <div class="row-fluid">
      <membership-management docid="network.id" doctype="NETWORK" order="network.membershipSortOrder" permissions="permissions" on-update="setOrder(newOrder)"></membership-management>
    </div>

    <a ng-if="network.studyIds.length > 0 || network.networkIds.length > 0" href
      class="btn btn-responsive btn-info hidden-print" ng-click="showAllContacts()"><i class="fa fa-group"></i> <span
      translate>network.associated-people</span></a>
  </div>
</div>
