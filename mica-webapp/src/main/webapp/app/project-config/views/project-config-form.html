<!--
  ~ Copyright (c) 2018 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div>

  <h2>
    <ol class="breadcrumb mica-breadcrumb">
      <li><a href="/#/admin" translate>global.menu.admin</a></li>
      <li class="active" translate>project-config.title</li>
    </ol>
  </h2>

  <obiba-alert id="ProjectConfigController"></obiba-alert>

  <div class="tabs-menu" ng-class="{'tabs-left': screen.is('lg')}">
    <ul class="nav nav-tabs">
      <li ng-class="{'active': tab.name === 'form'}">
        <a href ng-click="tab.name = 'form'" title="{{'form' | translate}}"><i class="fa fa-list"></i></a>
      </li>
      <li ng-class="{'active': tab.name === 'permissions'}">
        <a href ng-click="tab.name = 'permissions'; loadPermissions()" title="{{'permissions' | translate}}"><i class="fa fa-lock"></i></a>
      </li>
    </ul>
  </div>

  <div ng-show="tab.name === 'form'">
    <span class="config-navigation"><h3 class="config-navigation-item" translate>project-config.schema-form.title</h3></span>

    <p class="help-block" translate>project-config.schema-form.info</p>
    <entity-sf-config form="form" alert-id="ProjectConfigController" dirty-observable="state.getDirtyObservable()"></entity-sf-config>
  </div>

  <div ng-show="tab.name === 'permissions'">
    <h3 translate>permissions</h3>
    <permissions-table
      permissions="acls" on-load="loadPermissions" on-add="addPermission" on-delete="deletePermission" name="'research-projects'"
      accesses="accesses" on-access-load="loadAccesses" on-access-add="addAccess" on-access-delete="deleteAccess" open-access="openAccess"
      permission-roles="permissionsRoles" custom-title-info="titleInfo"></permissions-table>
  </div>

  <div ng-show="tab.name !== 'permissions'" class="voffset4">
    <a href="#/admin" class="btn btn-default">
      <span translate>cancel</span>
    </a>

    <button ng-click="saveForm()" class="btn btn-primary">
      <span translate>save</span>
    </button>
  </div>

</div>
