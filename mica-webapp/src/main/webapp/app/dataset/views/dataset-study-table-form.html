<!--
  ~ Copyright (c) 2018 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->
<p class="help-block" translate>dataset.study-table.info</p>

<h4 translate>dataset.study-dce.title</h4>

<p class="help-block" translate>dataset.study-dce.info</p>

<div class="form-group">
  <label class="control-label">
    <span translate>study.label</span>
    <span>*</span>
  </label>
  <ui-select theme="bootstrap" ng-model="selected.study" reset-search-input="true" required="true">
    <ui-select-match>{{$select.selected.id}}</ui-select-match>
    <ui-select-choices repeat="study in studies| filter: {id: $select.search}">
      <span ng-bind-html="study.id | highlight: $select.search"></span>
    </ui-select-choices>
  </ui-select>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="form-group">
      <label class="control-label">
        <span translate>study.population</span>
        <span>*</span>
      </label>
      <ui-select theme="bootstrap" ng-model="selected.study.population" reset-search-input="true" required="true">
        <ui-select-match>{{$select.selected.id}}</ui-select-match>
        <ui-select-choices repeat="population in selected.study.populationSummaries | filter: $select.search">
          <span ng-bind-html="population.id | highlight: $select.search"></span> - <span ng-bind-html="population.name[0].value | highlight: $select.search"></span>
        </ui-select-choices>
      </ui-select>
    </div>
  </div>
  <div class="col-md-6">
    <div class="form-group">
      <label class="control-label">
        <span translate>study.data-collection-event</span>
        <span>*</span>
      </label>
      <ui-select theme="bootstrap" ng-model="selected.study.population.dataCollectionEvent" reset-search-input="true" required="true">
        <ui-select-match>{{$select.selected.id}}</ui-select-match>
        <ui-select-choices repeat="population in selected.study.population.dataCollectionEventSummaries | filter: $select.search">
          <span ng-bind-html="population.id | highlight: $select.search"></span> - <span ng-bind-html="population.name[0].value | highlight: $select.search"></span>
        </ui-select-choices>
      </ui-select>
    </div>
  </div>
</div>

<h4 translate>dataset.datasource.opal.title</h4>

<p class="help-block" translate>dataset.datasource.opal.info</p>

<div class="row">
  <div class="col-md-6">
    <div class="form-group">
      <label class="control-label">
        <span translate>dataset.project</span>
        <span>*</span>
      </label>
      <ui-select theme="bootstrap" ng-model="selected.project" reset-search-input="true" required="true">
        <ui-select-match>{{$select.selected.name}}</ui-select-match>
        <ui-select-choices repeat="project in projects | filter: {name: $select.search}">
          <span ng-bind-html="project.name | highlight: $select.search"></span>
        </ui-select-choices>
      </ui-select>
    </div>
  </div>
  <div class="col-md-6">
    <div class="form-group">
      <label class="control-label">
        <span translate>dataset.table</span>
        <span>*</span>
      </label>
      <ui-select theme="bootstrap" ng-model="selected.project.table" reset-search-input="true" required="true">
        <ui-select-match>{{$select.selected}}</ui-select-match>
        <ui-select-choices repeat="table in selected.project.datasource.table | filter: $select.search">
          <span ng-bind-html="table | highlight: $select.search"></span>
        </ui-select-choices>
      </ui-select>
    </div>
  </div>
</div>

<h4 translate>dataset.options</h4>

<div sf-model="dataset.studyTable.model" sf-form="sfForm.definition" sf-schema="sfForm.schema" sf-options="sfOptions"></div>
