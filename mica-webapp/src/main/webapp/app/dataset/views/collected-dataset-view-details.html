<!--
  ~ Copyright (c) 2018 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="voffset4">
  <div class="row">
    <div class="col-md-6">
      <div sf-model="dataset.model" sf-form="sfForm.definition" sf-schema="sfForm.schema" sf-options="sfOptions"></div>
    </div>
    <div class="col-md-6">
      <div>
        <h3 class="pull-left" translate>dataset.study-table.title</h3>
        <div ng-show="inViewMode() && permissions.canEdit()" class="pull-right voffset3 hidden-print">
          <a href="" ng-click="editStudyTable()" class="action btn btn-primary btn-responsive" ng-show="dataset.collected">
            <i class="fa fa-pencil-square-o"></i></a>
          <a href="" ng-click="deleteStudyTable()" class="action btn btn-danger btn-responsive" ng-show="dataset.collected">
            <i class="fa fa-trash-o"></i></a>
        </div>
      </div>

      <div class="clearfix"/>

      <p class="help-block" translate>dataset.study-table.info</p>

      <button type="button" class="btn btn-info btn-sm voffset2" ng-click="editStudyTable()" ng-hide="dataset.collected">
        <i class="fa fa-plus"></i> <span translate>dataset.add-study-table</span>
      </button>

      <table class="table table-bordered table-striped" ng-show="dataset.collected.studyTable">
        <tbody>
        <tr>
          <th translate>study.label</th>
          <td>
            <a ng-href="#/individual-study/{{dataset.collected.studyTable.studyId}}">
              {{dataset.collected.studyTable.studyId}}
            </a>
          </td>
        </tr>
        <tr>
          <th translate>study.population</th>
          <td>
            {{dataset.collected.studyTable.populationId}}
          </td>
        </tr>
        <tr>
          <th translate>study.data-collection-event</th>
          <td>
            {{dataset.collected.studyTable.dataCollectionEventId}}
          </td>
        </tr>
        <tr>
          <th translate>dataset.table-name</th>
          <td>
            <ul class="list-unstyled">
              <li ng-repeat="text in dataset.collected.studyTable.name">
                <span class="badge">{{text.lang}}</span> {{text.value}}
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <th translate>dataset.table-description</th>
          <td>
            <ul class="list-unstyled">
              <li ng-repeat="text in dataset.collected.studyTable.description">
                <span class="badge">{{text.lang}}</span> {{text.value}}
              </li>
            </ul>
            <localized value="" lang="tab.lang"></localized>
          </td>
        </tr>
        <tr>
          <th translate>dataset.table-additional-information</th>
          <td>
            <ul class="list-unstyled">
              <li ng-repeat="text in dataset.collected.studyTable.additionalInformation">
                <span class="badge">{{text.lang}}</span> {{text.value}}
              </li>
            </ul>
            <localized value="" lang="tab.lang"></localized>
          </td>
        </tr>
        </tbody>
      </table>

      <div ng-show="dataset.collected.studyTable.namespace === 'opal'">
        <h4 translate>dataset.datasource.opal.title</h4>
        <p class="help-block" translate>dataset.datasource.opal.info</p>

        <table class="table table-bordered table-striped" ng-show="dataset.collected">
          <tbody>
          <tr>
            <th translate>dataset.project</th>
            <td>
              {{dataset.collected.studyTable.project}}
            </td>
          </tr>
          <tr>
            <th translate>dataset.table</th>
            <td>
              {{dataset.collected.studyTable.table}}
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <div ng-show="dataset.collected.studyTable.namespace === 'file'">
        <h4 translate>dataset.datasource.file.title</h4>
        <p class="help-block" translate>dataset.datasource.file.info</p>

        <table class="table table-bordered table-striped" ng-show="dataset.collected">
          <tbody>
          <tr>
            <th translate>path</th>
            <td>
              {{dataset.collected.studyTable.path}}
            </td>
          </tr>
          <tr>
            <th translate>dataset.table</th>
            <td>
              {{dataset.collected.studyTable.table}}
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <div ng-show="dataset.collected.studyTable.namespace === 'other'">
        <h4 translate>dataset.datasource.other.title</h4>
        <p class="help-block" translate>dataset.datasource.other.info</p>

        <table class="table table-bordered table-striped" ng-show="dataset.collected">
          <tbody>
          <tr>
            <th translate>dataset.datasource.other.nid</th>
            <td>
              {{dataset.collected.studyTable.nid}}
            </td>
          </tr>
          <tr>
            <th translate>dataset.datasource.other.nss</th>
            <td>
              {{dataset.collected.studyTable.nss}}
            </td>
          </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>
